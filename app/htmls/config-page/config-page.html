<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
  <head>
    <meta name="color-scheme" content="light dark" />
    <link rel="icon" id="favicon" href="../../images/F-D_dark.png" />
    <link rel="stylesheet" href="./config-page.css" />
    <title>F-PKI Plugin Configuration</title></head>
  <body>
    <div id="options">
      <h1>Configuration Page</h1>
      <button id="printConfig">Print Config</button>
      <button id="downloadConfig">Download Config</button>
      <button id="resetConfig">Reset Config to Default</button>
      <br/>
      Upload new config:
      <input type="file" id="file" onchange="handle_files()">
      <button id="uploadConfig">Upload</button>
      <br/>

      <div class="settings-section">
        <h2>Mapservers</h2>
        <table id="mapservers-table">
          <thead>
              <tr>
                  <th colspan="1">Identity</th>
                  <th colspan="1">Domain</th>
                  <th colspan="1">Query Type</th>
                  <th colcpan="1">Action</th>
              </tr>
          </thead>
          <tbody id="mapservers-table-body">
              <!-- Mapservers will be inserted based on JSON configuration -->
          </tbody>
        </table>
        <button class="reset-changes mapservers">Undo Changes</button>
        <button class="save-changes mapservers">Save Changes</button>
      </div>

      <div class="settings-section">
        <h2>CA Sets</h2>
        <table id="ca-sets-table">
          <thead>
              <tr>
                  <th colspan="1">Identifier</th>
                  <th colspan="1">CA List</th>
              </tr>
          </thead>
          <tbody id="ca-sets-table-body">
              <tr>
                <td>US CA</td>
                <td>
                  <table>
                    <tbody>
                      <tr><td>asdf</td></tr>
                      <tr><td>e5jetzhf</td></tr>
                      <tr><td>tezvjts</td></tr>
                    </tbody>
                  </table>
                  
                </td>
              </tr>
          </tbody>
        </table>
      </div>

      <!-- LEGACY TRUST PREFERENCES -->
      <div class="settings-section">
        <h2>Legacy Trust Preferences</h2>
        <table id="legacy-trust-preference-table">
          <thead>
              <tr>
                <th colspan="1" rowspan="2">Domain</th>
                <th colspan="2">Preferences</th>
                <th rowspan="2"></th>
              </tr>
              <tr>
                <th>CA Set</th>
                <th>Trust Level</th>
              </tr>
          </thead>
          <tbody id="legacy-trust-preference-table-body">
                <!-- Table generated by javascript-->
          </tbody>
        </table>
        <button class="reset-changes legacy-trust-preference">Reset Changes</button>
        <button class="save-changes legacy-trust-preference">Save Changes</button>
      </div>

      <!-- POLICY TRUST PREFERENCES -->
      <div class="settings-section">
        <h2>Policy Trust Preferences</h2>
        <table id="policy-trust-preference-table">
          <thead>
              <tr>
                <th colspan="1" rowspan="2">Domain</th>
                <th colspan="2">Preferences</th>
                <th rowspan="2"></th>
              </tr>
              <tr>
                <th>PCA</th>
                <th>Trust Level</th>
              </tr>
          </thead>
          <tbody id="policy-trust-preference-table-body">
                <!-- Table generated by javascript-->
          </tbody>
        </table>
        <button class="reset-changes policy-trust-preference">Reset Changes</button>
        <button class="save-changes policy-trust-preference">Save Changes</button>
      </div>

      <div class="settings-section">
        <h2>Other Settings</h2>
        <table id="other-table">
          <thead>
              <tr>
                  <th colspan="1">Setting</th>
                  <th colspan="1">Value</th>
              </tr>
          </thead>
          <tbody id="other-table-body">
              <tr>
                <td>Cache Timeout: </td>
                <td><input type="int" class="cache-timeout" /></td>
              </tr>
              <tr>
                <td>Max Connection Setup Time: </td>
                <td><input type="int" class="max-connection-setup-time" /></td>
              </tr>
              <tr>
                <td>Proof Fetch Timeout: </td>
                <td><input type="int" class="proof-fetch-timeout" /></td>
              </tr>
              <tr>
                <td>Proof Fetch Max Tries: </td>
                <td><input type="int" class="proof-fetch-max-tries" /></td>
              </tr>
              <tr>
                <td>Mapserver Quorum: </td>
                <td><input type="int" class="mapserver-quorum" /></td>
              </tr>
              <tr>
                <td>Mapserver Instances Queried: </td>
                <td><input type="int" class="mapserver-instances-queried" /></td>
              </tr>
              <tr>
                <td>Send Log Entries via Event: </td>
                <td><input type="int" class="send-log-entries-via-event" /></td>
              </tr>
              <tr>
                <td>Wasm Certificate Parsing: </td>
                <td><input type="int" class="wasm-certificate-parsing" /></td>
              </tr>
          </tbody>
        </table>
        <button class="reset-changes other-settings">Reset Changes</button>
        <button class="save-changes other-settings">Save Changes</button>
      </div>

    </div>
    <div id="output">
      <pre>
        <code id="config-code">
          { "hello": "world" }
        </code>
      </pre>
    </div>

    <script type="module" src="./config-page.js"></script>
  </body>
</html>
