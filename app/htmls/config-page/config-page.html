<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="de-DE">
  <head>
    <meta name="color-scheme" content="light dark" />
    <meta charset="UTF-8">
    <link rel="icon" id="favicon" href="../../images/F-D_dark.png" />
    <link rel="stylesheet" href="./config-page.css" />
    <title>Settings F-PKI Plugin</title>
  </head>
  <body>
    <div id="options">
      <h1>Configuration Page</h1>

      <p>
        An dieser Stelle stehen ein paar einleitende Worte, die grob
        zusammenfassen, was man alles auf dieser Seite eintellen kann.
      </p>
      <p>
        Man könnte auch beispielsweise auf die Infoseite des Plugins bzw.
        weiterführende Informationen verweisen an dieser Stelle.
        
        Aber jetzt erstmal viel Spaß mit den Settings!
      </p>
      


      <!-- LEGACY TRUST PREFERENCES -->
      <div class="settings-section">
        <div class="settings-section-header">
          <h2 style="display: inline-block;">User Policies</h2>
          <span class="info-icon">&#9432;</span>
          <div class="info-box" hidden>
            <p>
              User Policies haben eine oder mehrere <span
              class="keyword">Domains</span> als <b>Scope</b>.
            </p>
            <p>
              Domains können mit <b>Wildcards</b> angegeben werden, d.h. <span
              class="code">*.example.com</span> oder <span
              class="code">*.de</span> sind valide Angaben, um alle Subdomains
              von example.com bzw. alle Domains mit <q>de</q> als
              Top-Level-Domain zu selektieren
            </p>
            <p>
              Innerhalb dieses Scopes können für beliebig viele <span
              class="keyword">CA-Sets</span> (<a href="#">hier</a>
              konfigurierbar) individuelle <span
              class="keyword">Trust Level</span> gewählt werden:
            </p>

            <ul>
              <li style="margin-bottom: 5px;">
                <b>Untrusted:</b> Zertifikate werden nicht akzeptiert
              </li>
              <li style="margin-bottom: 5px;">
                <b>Trusted:</b> Zertifikate werden akzeptiert, esseidenn es
                existieren Zertifikate für die Domain, welche von CAs mit
                konfiguriertem Trust-Level <span class="code">High Trust</span>
                oder <span class="code">Perfect Trust</span> ausgestellt
                wurden.<sup>1,2</sup>
              </li>
              <li>
                <b>High Trust:</b> Zertifikate werden akzeptiert, esseidenn es
                existieren Zertifikate für die Domain, welche von CAs mit
                konfiguriertem Trust-Level <span class="code">Perfect
                Trust</span> ausgestellt wurden.<sup>1,2</sup>
              </li>
              <li>
                <b>Perfect Trust:</b> Zertifikate werden akzeptiert.<sup>1</sup>
              </li>
            </ul>

            <p style="margin-left: 25px;">
              <sup>1</sup> Zertifikate können auch durch <a href="#">Domain
              Policies</a> invalidiert werden.
              <br>
              <sup>2</sup> Existierende Zertifikate werden von <a
              href="#">Mapservern</a> gesammelt und zur Verfügung gestellt, die
              ähnlich wie Certificate-Transparency-Logs funktionieren.
            </p>
          </div>
        </div>
        
        <table id="legacy-trust-preference-table">
          <thead>
              <tr>
                <th colspan="1" rowspan="2">Domain</th>
                <th colspan="2">Preferences</th>
                <th rowspan="2"></th>
              </tr>
              <tr>
                <th><span style="border: 2px dotted white;">CA Set</span></th>
                <th>Trust Level</th>
              </tr>
          </thead>
          <tbody id="legacy-trust-preference-table-body">
                <!-- Table generated by javascript-->
          </tbody>
        </table>
        <button class="reset-changes legacy-trust-preference">Reset Changes</button>
        <button class="save-changes legacy-trust-preference">Save Changes</button>
      </div>


      <!-- POLICY TRUST PREFERENCES -->
      <div class="settings-section">
        <h2>Policy Trust Preferences</h2>
        <table id="policy-trust-preference-table">
          <thead>
              <tr>
                <th colspan="1" rowspan="2">Domain</th>
                <th colspan="2">Preferences</th>
                <th rowspan="2"></th>
              </tr>
              <tr>
                <th>PCA</th>
                <th>Trust Level</th>
              </tr>
          </thead>
          <tbody id="policy-trust-preference-table-body">
                <!-- Table generated by javascript-->
          </tbody>
        </table>
        <button class="reset-changes policy-trust-preference">Reset Changes</button>
        <button class="save-changes policy-trust-preference">Save Changes</button>
      </div>


      <!-- CA SETS -->
      <div class="settings-section">
        <h2>CA Sets</h2>
        <table id="ca-sets-table">
          <thead>
              <tr>
                  <th colspan="1">Set Name</th>
                  <th colspan="1">CA List</th>
                  <th></th>
              </tr>
          </thead>
          <tbody id="ca-sets-table-body">
              <!-- javascript generated -->
          </tbody>
        </table>
        <button class="reset-changes ca-sets">Reset Changes</button>
        <button class="save-changes ca-sets">Save Changes</button>
      </div>

    
      <!-- 
        ADVANCED SETTINGS 
      -->
      <h1 style="display: inline-block;">Advanced Settings</h1>
      <button 
        id="advancedButton"
        style="padding: 6px;
               margin-left: 10px;
               position: relative;
               top: -4px;
               font-size: larger;
               font-weight: bold;
               border-width: 3px;
               border-style: groove;
               border-radius: 10px;">
        Show
      </button>

      <div id="advanced-settings" hidden="">

        <button id="printConfig">Print Config</button>
        <button id="downloadConfig">Download Config</button>
        <button id="resetConfig">Reset Config to Default</button>
        <br/>
        Upload new config:
        <input type="file" id="file" onchange="handle_files()">
        <button id="uploadConfig">Upload</button>
        <br/>

        <!-- MAPSERVER SETTINGS -->
        <div class="settings-section">
          <h2>Mapservers</h2>
          <table id="mapservers-table">
            <thead>
                <tr>
                    <th colspan="1">Identity</th>
                    <th colspan="1">Domain</th>
                    <th colspan="1">Query Type</th>
                    <th colcpan="1">Action</th>
                </tr>
            </thead>
            <tbody id="mapservers-table-body">
                <!-- Mapservers will be inserted based on JSON configuration -->
            </tbody>
          </table>
          <button class="reset-changes mapservers">Undo Changes</button>
          <button class="save-changes mapservers">Save Changes</button>
        </div>


        <!-- OTHER SETTINGS -->
        <div class="settings-section">
          <h2>Other Settings</h2>
          <table id="other-table">
            <thead>
                <tr>
                    <th colspan="1">Setting</th>
                    <th colspan="1">Value</th>
                </tr>
            </thead>
            <tbody id="other-table-body">
                <tr>
                  <td>Cache Timeout: </td>
                  <td><input type="int" class="cache-timeout" /></td>
                </tr>
                <tr>
                  <td>Max Connection Setup Time: </td>
                  <td><input type="int" class="max-connection-setup-time" /></td>
                </tr>
                <tr>
                  <td>Proof Fetch Timeout: </td>
                  <td><input type="int" class="proof-fetch-timeout" /></td>
                </tr>
                <tr>
                  <td>Proof Fetch Max Tries: </td>
                  <td><input type="int" class="proof-fetch-max-tries" /></td>
                </tr>
                <tr>
                  <td>Mapserver Quorum: </td>
                  <td><input type="int" class="mapserver-quorum" /></td>
                </tr>
                <tr>
                  <td>Mapserver Instances Queried: </td>
                  <td><input type="int" class="mapserver-instances-queried" /></td>
                </tr>
                <tr>
                  <td>Send Log Entries via Event: </td>
                  <td><input type="int" class="send-log-entries-via-event" /></td>
                </tr>
                <tr>
                  <td>Wasm Certificate Parsing: </td>
                  <td><input type="int" class="wasm-certificate-parsing" /></td>
                </tr>
            </tbody>
          </table>
          <button class="reset-changes other-settings">Reset Changes</button>
          <button class="save-changes other-settings">Save Changes</button>
        </div>
      </div>

    </div>

    <div id="output">
      <pre>
        <code id="config-code">
          { "hello": "world" }
        </code>
      </pre>
    </div>

    <script type="module" src="./config-page.js"></script>
  </body>
</html>
